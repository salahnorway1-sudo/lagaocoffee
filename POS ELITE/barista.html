<!DOCTYPE html>
<html>
<head>
    <title>Professional Barista Screen</title>
    <style>
        body { font-family: Arial; padding:20px; background:#f7f7f7; }
        h2 { margin-bottom:20px; }
        #orders { max-height:90vh; overflow:auto; }
        .order-box{
            background:white; padding:20px; border-radius:12px; margin-bottom:12px;
            box-shadow:0 2px 6px rgba(0,0,0,0.1); transition:0.2s; font-size:16px;
        }
        .order-box:hover{ background:#f0f0f0; }
        .item { margin-left:10px; padding:2px 0; }
        .Coffee{ color:#d35400; }
        .Tea{ color:#27ae60; }
        .Drinks{ color:#2980b9; }
        .Food{ color:#f39c12; }
        button{ padding:6px 12px; background:#333; color:white; border:none; border-radius:6px; cursor:pointer; margin-top:10px; }
        button:hover{ background:#555; }
    </style>
</head>
<body>

<h2>Barista Orders</h2>
<div id="orders">Waiting for your orders...</div>

<script>
// LOAD ALL ORDERS
function loadOrders(){
    let raw = localStorage.getItem('pos_history');
    const container = document.getElementById('orders');
    if(!raw || JSON.parse(raw).length===0){
        container.innerHTML='Waiting for your orders...';
        return;
    }

    let history = JSON.parse(raw);
    container.innerHTML = '';

    history.forEach((o,idx)=>{
        const div = document.createElement('div');
        div.className='order-box';
        div.innerHTML = `<strong>Table:</strong> ${o.table} <br>
                         <strong>Time:</strong> ${o.time} <br>
                         <strong>Items:</strong> <br>
                         ${o.items.map(it=>`<div class="item ${getCategory(it.name)}">- ${it.name} x${it.qty} (${it.price*it.qty}₫)</div>`).join('')}
                         <button onclick="markDone(${idx})">Mark Done</button>`;
        container.appendChild(div);
    });

    // Auto scroll to bottom
    container.scrollTop = container.scrollHeight;
}

// DETERMINE CATEGORY BY NAME
function getCategory(name){
    const coffee = ["Cà phê sữa","Cà phê đen"];
    const tea = ["Trà đào","Trà chanh"];
    const drinks = ["Sinh tố bơ","Nước suối"];
    const food = ["Bánh mì","Croissant"];

    if(coffee.includes(name)) return "Coffee";
    if(tea.includes(name)) return "Tea";
    if(drinks.includes(name)) return "Drinks";
    if(food.includes(name)) return "Food";
    return "";
}

// MARK DONE
function markDone(index){
    let history = JSON.parse(localStorage.getItem('pos_history')||'[]');
    history.splice(index,1);
    localStorage.setItem('pos_history', JSON.stringify(history));
    loadOrders();
    alert('Order completed!');
}

// AUTO-REFRESH
setInterval(loadOrders,1000);
loadOrders();
</script>

</body>
</html>
