<!DOCTYPE html>
<html>
<head>
    <title>Professional POS - Touch Ready</title>
    <style>
        body { font-family: Arial; background:#f7f7f7; margin:0; padding:20px; }
        h2{ margin-bottom:20px; }
        .container{ display:flex; gap:20px; }
        /* MENU */
        .menu-container{ width:65%; }
        .tabs{ display:flex; gap:10px; margin-bottom:10px; }
        .tab{ padding:10px 15px; border-radius:8px; background:#333; color:white; cursor:pointer; transition:0.2s; }
        .tab.active{ background:#ff6f00; }
        .menu{ display:flex; flex-wrap:wrap; gap:12px; }
        .item-btn{
            width:150px; height:170px; border-radius:12px; border:1px solid #ccc;
            display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:pointer;
            transition:0.2s;
            text-align:center;
            padding:5px;
        }
        .item-btn img{ width:80px; height:80px; object-fit:cover; border-radius:8px; margin-bottom:5px; }
        .item-btn span.name{ font-size:14px; font-weight:bold; margin-bottom:2px; }
        .item-btn span.desc{ font-size:12px; color:#555; }
        /* Category colors */
        .Coffee{ background:#ffe6cc; }
        .Coffee:hover{ background:#ffd1a3; }
        .Tea{ background:#d1f0d1; }
        .Tea:hover{ background:#a3e6a3; }
        .Drinks{ background:#cce0ff; }
        .Drinks:hover{ background:#99c2ff; }
        .Food{ background:#fff0cc; }
        .Food:hover{ background:#ffd699; }
        /* CART */
        .cart-box{ width:35%; background:white; padding:20px; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1); max-height:90vh; overflow:auto; }
        .cart-item{ display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px solid #eee; font-size:14px; transition:0.2s; }
        .cart-item:hover{ background:#f5f5f5; }
        button{ padding:6px 10px; margin-left:4px; background:#333; color:white; border:none; border-radius:6px; cursor:pointer; }
        button:hover{ background:#555; }
        input{ padding:8px; width:100%; margin-top:10px; border-radius:6px; border:1px solid #ccc; }
        h3{ margin-top:15px; margin-bottom:5px; }
        #history{ max-height:200px; overflow:auto; margin-top:10px; background:#fafafa; padding:6px; border-radius:6px; border:1px solid #ddd; }
    </style>
</head>
<body>

<h2>Professional POS System</h2>

<div class="container">
    <!-- MENU -->
    <div class="menu-container">
        <div class="tabs" id="tabs"></div>
        <div class="menu" id="menu"></div>
    </div>

    <!-- CART -->
    <div class="cart-box">
        <h3>Cart</h3>
        <div id="cart"></div>
        <div style="margin-top:10px;">Total: <span id="total">0</span>₫</div>
        <input id="table" placeholder="Table Number">
        <button onclick="sendOrder()">Send Order</button>
        <button onclick="showHistory()">Show Order History</button>
        <div id="history">No previous orders</div>
    </div>
</div>

<script>
// MENU DATA WITH DESCRIPTION
const menuData = {
    "Coffee":[
        {name:"Cà phê sữa", desc:"Vietnamese coffee with milk", price:30000, img:"images/coffee1.jpg"},
        {name:"Cà phê đen", desc:"Strong black coffee", price:25000, img:"images/coffee2.jpg"}
    ],
    "Tea":[
        {name:"Trà đào", desc:"Peach flavored iced tea", price:35000, img:"images/tea1.jpg"},
        {name:"Trà chanh", desc:"Refreshing lemon tea", price:20000, img:"images/tea2.jpg"}
    ],
    "Drinks":[
        {name:"Sinh tố bơ", desc:"Avocado smoothie", price:45000, img:"images/drink1.jpg"},
        {name:"Nước suối", desc:"Bottled water", price:10000, img:"images/drink2.jpg"}
    ],
    "Food":[
        {name:"Bánh mì", desc:"Vietnamese sandwich", price:15000, img:"images/food1.jpg"},
        {name:"Croissant", desc:"Flaky butter croissant", price:25000, img:"images/food2.jpg"}
    ]
};

let cart = [];
let activeCategory = "Coffee";

// RENDER TABS
function renderTabs(){
    const tabsDiv = document.getElementById('tabs');
    tabsDiv.innerHTML = '';
    Object.keys(menuData).forEach(cat=>{
        const tab = document.createElement('div');
        tab.className = 'tab' + (cat===activeCategory?' active':'');
        tab.innerText = cat;
        tab.onclick = ()=>{ activeCategory=cat; renderTabs(); renderMenu(); };
        tabsDiv.appendChild(tab);
    });
}

// RENDER MENU
function renderMenu(){
    const menuDiv = document.getElementById('menu');
    menuDiv.innerHTML='';
    menuData[activeCategory].forEach((item,index)=>{
        const btn = document.createElement('div');
        btn.className='item-btn ' + activeCategory;
        btn.innerHTML=`<img src="${item.img}">
                       <span class="name">${item.name}<br>${item.price}₫</span>
                       <span class="desc">${item.desc}</span>`;
        btn.onclick=()=> addToCart(item);
        menuDiv.appendChild(btn);
    });
}

// ADD TO CART
function addToCart(item){
    const cartItem = {...item, qty:1};
    cart.push(cartItem);
    renderCart();
}

// RENDER CART
function renderCart(){
    const cartDiv = document.getElementById('cart');
    cartDiv.innerHTML='';
    let total=0;
    cart.forEach((item,i)=>{
        total += item.price*item.qty;
        const div = document.createElement('div');
        div.className='cart-item';
        div.innerHTML=`${item.name} x${item.qty} — ${item.price*item.qty}₫
            <span>
                <button onclick="changeQty(${i},1)">+</button>
                <button onclick="changeQty(${i},-1)">-</button>
                <button onclick="removeItem(${i})">X</button>
            </span>`;
        cartDiv.appendChild(div);
    });
    document.getElementById('total').innerText=total;
}

// CHANGE QTY
function changeQty(index,change){
    cart[index].qty += change;
    if(cart[index].qty<1) cart[index].qty=1;
    renderCart();
}

// REMOVE ITEM
function removeItem(index){ cart.splice(index,1); renderCart(); }

// SEND ORDER
function sendOrder(){
    if(cart.length===0){ alert('Cart empty'); return; }
    const order = { table: document.getElementById('table').value||'No table', items:cart, time:new Date().toLocaleString() };
    localStorage.setItem('pos_order', JSON.stringify(order));

    // SAVE HISTORY
    let history = JSON.parse(localStorage.getItem('pos_history')||'[]');
    history.push(order);
    localStorage.setItem('pos_history', JSON.stringify(history));

    alert('Order sent to barista!');
    cart=[]; renderCart();
}

// SHOW ORDER HISTORY
function showHistory(){
    const historyDiv = document.getElementById('history');
    let history = JSON.parse(localStorage.getItem('pos_history')||'[]');
    if(history.length===0){ historyDiv.innerText='No previous orders'; return; }
    historyDiv.innerHTML=history.map(o=>`<div><strong>Table:</strong> ${o.table}, <strong>Items:</strong> ${o.items.map(i=>i.name+'x'+i.qty).join(', ')}, <strong>Time:</strong> ${o.time}</div>`).join('<br>');
}

// INITIAL RENDER
renderTabs();
renderMenu();
renderCart();
</script>

</body>
</html>
